{% extends "plantilla.html" %} 
{% block title %} Requisitos {% endblock %} 
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css"/>
<div class="container">
  <div class="card card-outline card-info mt-3">
    <div class="card-header">
      <h1 class="card-title"><b>Lista de Requisitos</b></h1>
      <br/><br/>
      {% if perms.tramitesApp.add_tipotramite %}
            <a href="{% url 'agregarrequisitos' %}" class='btn btn-sm btn-light btn-add'><i class='fa fa-plus'></i> NUEVO</a>
      {% endif %}
    </div>
    <div class="card-body">

      <div class="row">
        <div class="col-md-6 pull-right">
            <form action="" method="GET">
                <div class="input-group">
                    <input type="text" name="buscar" id="buscar" class="form-control" autofocus placeholder="Buscar" value="">
                    <span class="input-group-btn ">
                    <button class="btn btn-primary btn-lg">
                    <i class="fa fa-search"></i>
                    </button>
                    </span>
                </div>
            </form>
        </div>
        
      </div>
      
      <table class="table mt-2">
        <table id="tablasubfamilias" class="table table-striped mt-4" style="width: 100%">
          <thead class="bg-info text-white">
            <tr>
            <th><center>#</center></th>
              <th><center>TIPO DE TRÁMITE</center></th>
              <th><center>REQUISITOS</center></th>
            </tr>
          </thead>
          {% if requisito %} 
              {% for itemrequisito in requisito %}
              <tr>
                <!--  codigo pa que meustre los datos, verifica si hay registro -->
                    <td><center>{{ itemrequisito.tipoTramite_id }}</center></td>
                    <td><center>{{ itemrequisito.tipoTramite }}</center></td>
                    <td><center>{{ itemrequisito.requisito }}</center></td>
              </tr>
              {% endfor %} 
          {% else %}
          <tr style="text-align: center">
            <!--   si no hay registro , no muestren datos ps -->
            <td colspan="3">
              <p>No hay Registros</p>
            </td>
          </tr>
          {% endif %}
        </table>
      </table>

      <div class="row mt-3 justify-content-center">
        <nav>
          <ul class="pagination">

            {% if requisito.has_previous %}
                <li class="page-item">
                  <a class="page-link" href="?page=1">Primera</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="?page={{ requisito.previous_page_number }}">&laquo;</a>
                </li>
            {% endif %} 

            {% for pagina in paginas %}
                <li class="page-item{% if pagina_action == page %} active {% endif %}">
                  <a class="page-link" href="?page={{ pagina }}">{{ pagina }}</a>
                </li>
            {% endfor %} 

            {% if requisito.has_next %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ requisito.next_page_number }}">&raquo;</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="?page={{ requisito.paginator.num_pages }}">Última</a>
                </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      
    </div>
  </div>
</div>
{% endblock %} 

{% block js %}
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
{% if messages %} 
    {% for m in messages %}
        <script>
          Swal.fire({
            title: "Eliminado",
            text: "{{m}}",
            icon: "success",
          });
        </script>
    {% endfor %} 
{% endif %}

<script>
      function eliminarrequisitos(id,tipoRequisitos, requisito){
          Swal.fire({
              "title":"¿Realmente desea eliminar Registro?",
              "text":"ID: "+ id + " | "+ tipoRequisitos + " | "+ requisito,
              "icon":"question",
              "showCancelButton":true,
              "cancelButtonText":"No",
              "confirmButtonText":"Si",
              "reverseButton":true,
              "confirmButtonColor":"#dc3545"
          })
          .then(function(result){
              if(result.isConfirmed){
                  window.location.href="/eliminarrequisitos/"+id+"/"
              }
          })
      };
</script>

{% endblock %}
